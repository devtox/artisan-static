---
title: pyqt5 tablewidget mysql
date: 2022-05-03
image: /assets/images/database.jpg
comments: false
---
Learn how to use PyQt5 tablewidget with MySQL. Database table creation + SQL statements. 

PyQt is a Python binding of the cross-platform GUI toolkit Qt. It offers Python programmers a convenient way to create graphical user interfaces ([GUIs](https://www.python-me.org/a-brief-introduction-to-pyqt)). One advantage of using PyQt instead of Qt directly is that it provides support for automatic binding generation of Qt's signals and slots to Python's signals and slots. This can greatly simplify development by allowing the programmer to focus on the implementation rather than on boilerplate code.

The [QtDesigner](https://oneminutepython.com/pyqt5-designer) module can be used to develop GUI applications using a drag-and-drop interface similar to Visual Basic or Delphi. The generated code can then be customized by hand or using one of the available pyuic5 frontends.

MySQL is a relational database management system (RDBMS) based on the Structured Query Language (SQL). SQL is used to add, remove, and modify data in databases. MySQL is free and open source software under the terms of the GNU General Public License, and it is also available under a number of proprietary licenses published by Oracle Corporation.

```
Create a data table: tab with the following SQL statement.



SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for tab
-- ----------------------------
DROP TABLE IF EXISTS `tab`;
CREATE TABLE `tab` (
  `id` int(11) NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of tab
-- ----------------------------
INSERT INTO `tab` VALUES ('172101', 'Linda');
INSERT INTO `tab` VALUES ('172102', 'Laura');
INSERT INTO `tab` VALUES ('172103', 'Lisa');
INSERT INTO `tab` VALUES ('172104', 'Brandon');
INSERT INTO `tab` VALUES ('172105', 'Bart');
INSERT INTO `tab` VALUES ('172106', 'Bob');
```

### Qt designer interface creation

Let's make a random interface with designer: add a tableWidget and save it as hello.ui and turn it into hello.py: (the code is below)

The hello.ui interface file is converted to hello.py with the following code.

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'hello.ui'
#
# Created by: PyQt5 UI code generator 5.15.0
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(316, 372)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.tableWidget = QtWidgets.QTableWidget(self.centralwidget)
        self.tableWidget.setGeometry(QtCore.QRect(11, 11, 301, 271))
        self.tableWidget.setObjectName("tableWidget")
        self.tableWidget.setColumnCount(2)
        self.tableWidget.setRowCount(9)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(1, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(2, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(3, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(4, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(5, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(6, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(7, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setVerticalHeaderItem(8, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(1, item)
        item = QtWidgets.QTableWidgetItem()
        item.setTextAlignment(QtCore.Qt.AlignCenter)
        self.tableWidget.setItem(0, 0, item)
        self.button_read = QtWidgets.QPushButton(self.centralwidget)
        self.button_read.setGeometry(QtCore.QRect(90, 300, 121, 41))
        self.button_read.setObjectName("button_read")
        MainWindow.setCentralWidget(self.centralwidget)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "tableDemo"))
        item = self.tableWidget.verticalHeaderItem(0)
        item.setText(_translate("MainWindow", "1"))
        item = self.tableWidget.verticalHeaderItem(1)
        item.setText(_translate("MainWindow", "2"))
        item = self.tableWidget.verticalHeaderItem(2)
        item.setText(_translate("MainWindow", "3"))
        item = self.tableWidget.verticalHeaderItem(3)
        item.setText(_translate("MainWindow", "4"))
        item = self.tableWidget.verticalHeaderItem(4)
        item.setText(_translate("MainWindow", "5"))
        item = self.tableWidget.verticalHeaderItem(5)
        item.setText(_translate("MainWindow", "6"))
        item = self.tableWidget.verticalHeaderItem(6)
        item.setText(_translate("MainWindow", "7"))
        item = self.tableWidget.verticalHeaderItem(7)
        item.setText(_translate("MainWindow", "8"))
        item = self.tableWidget.verticalHeaderItem(8)
        item.setText(_translate("MainWindow", "9"))
        item = self.tableWidget.horizontalHeaderItem(0)
        item.setText(_translate("MainWindow", "ID"))
        item = self.tableWidget.horizontalHeaderItem(1)
        item.setText(_translate("MainWindow", "MainWindow"))
        __sortingEnabled = self.tableWidget.isSortingEnabled()
        self.tableWidget.setSortingEnabled(False)
        self.tableWidget.setSortingEnabled(__sortingEnabled)
        self.button_read.setText(_translate("MainWindow", "MainWindow"))
```

### Connecting to MySQL

Since we have separated the interface from the logic, the interface code is already there earlier, now we have to write the logic code.

Create a new main.py and write the following code to display the data in the database in tableWidget.

The main points to understand are.

```
# Connect to mysql and query the database, cur.fetchall() returns a two-dimensional tuple
#Database connection object
conn = pymysql.connect(host='localhost', port=3306, user='root', password="1234", db="test")
# Cursor object
cur = conn.cursor()
# The sql statement for the query
sql = "SELECT * FROM tab"
cur.execute(sql)
# Get the query data, which is stored as a two-dimensional tuple, so read it using the data[i][j] subscript locator
data = cur.fetchall()
# Print test
print(data)
# print(data[0][1]) # print the second data in the first row, i.e. Ming
```

Iterate over a two-dimensional tuple and displaying the data on a table.

```
# Iterate over a two-dimensional tuple, displaying id and name on the interface table
x = 0
for i in data:
    y = 0
    for j in i:
        self.tableWidget.setItem(x, y, QtWidgets.QTableWidgetItem(str(data[x][y])))
        y = y + 1
    x = x + 1
```

### pyqt5 tablewidget mysql

The example below fills the data from the table with MySQL database data.

![pyqt5 mysql tabletwidget](/assets/images/pyqt5-mysql-tablewidget.png)

Full code:

```
import sys
from PyQt5 import QtGui, QtWidgets
from PyQt5.QtCore import *
from PyQt5.QtWidgets import QApplication, QMainWindow, QHeaderView

from hello import Ui_MainWindow

import pymysql

class MyMainWindow(QMainWindow, Ui_MainWindow):
    def __init__(self):
        super(MyMainWindow, self).__init__()
        self.setupUi(self)
        self.button_read.clicked.connect(self.read)

    def read(self):
        conn = pymysql.connect(host='localhost', port=3306, user='root', password="1234", db="test")
        cur = conn.cursor()
        
        sql = "SELECT * FROM tab"
        cur.execute(sql)
        data = cur.fetchall()
        print(data)
        # print(data[0][1]) 

        x = 0
        for i in data:
            y = 0
            for j in i:
                self.tableWidget.setItem(x, y, QtWidgets.QTableWidgetItem(str(data[x][y])))
                y = y + 1
            x = x + 1

        cur.close()
        conn.close()

if __name__ == "__main__":
    QApplication.setAttribute(Qt.AA_EnableHighDpiScaling)
    app = QApplication(sys.argv)
    win = MyMainWindow()
    win.show()
    sys.exit(app.exec())
```
